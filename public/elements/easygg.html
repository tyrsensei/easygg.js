<link rel="import" href="/assets/polymer/polymer.html">
<link rel="import" href="/elements/socket-io.html">

<dom-module id="games-list">
    <template>
        <paper-listbox>
            <template is="dom-repeat" items="[[_toArray(games)]]">
                    <paper-item>
                        <paper-item-body>[[item.value.name]]</paper-item-body>
                        <socket-io emit="game tables" target-element="paper-icon-button" target-event="tap" namespace="[[item.name]]">
                            <paper-icon-button icon="icons:send" alt="Rejoindre"></paper-icon-button>
                        </socket-io>
                    </paper-item>
            </template>
        </paper-listbox>
    </template>

    <script>
        Polymer({
            is: 'games-list',
            properties: {
                games: {
                    type: Object,
                    notify: true
                }
            },
            _toArray: function(obj) {
                return Object.keys(obj).map(function(key) {
                    return {
                        name: key,
                        value: obj[key]
                    };
                });
            }
        });
    </script>
</dom-module>

<dom-module id="user-form">
    <template>
        <paper-card heading="Joueur">
            <div class="card-content">
                <paper-input label="Nom" value="{{name}}"></paper-input>
            </div>
            <div class="card-actions horizontal layout center-justified">
                <socket-io emit="user" target-element="paper-button" target-event="tap" emit-data='{ user : {{name}}}'>
                    <paper-button raised>Valider</paper-button>
                </socket-io>
            </div>
        </paper-card>
    </template>

    <script>
        Polymer({
            is: 'user-form',
            properties: {
                name: {
                    type: String,
                    notify: true
                }
            },
            attached: function() {
                this.name = 'test';
            }
        });
    </script>
</dom-module>

<dom-module id="tables-list">
    <template>
        <paper-header-panel>
            <paper-toolbar>
                <div class="title">Liste des parties</div>
                <paper-icon-button icon="icons:add"></paper-icon-button>
            </paper-toolbar>
            <div>
                Contenu
            </div>
      </paper-header-panel>
    </template>

    <script>
        Polymer({
            is: 'tables-list',
            properties: {
                tables: {
                    type: Object,
                    notify: true
                }
            },
            _toArray: function(obj) {
                return Object.keys(obj).map(function(key) {
                    return {
                        name: key,
                        value: obj[key]
                    };
                });
            },
            createTable: function() {
            }
        });
    </script>
</dom-module>
